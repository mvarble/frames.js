(()=>{"use strict";var r={n:t=>{var n=t&&t.__esModule?()=>t.default:()=>t;return r.d(n,{a:n}),n},d:(t,n)=>{for(var e in n)r.o(n,e)&&!r.o(t,e)&&Object.defineProperty(t,e,{enumerable:!0,get:n[e]})},o:(r,t)=>Object.prototype.hasOwnProperty.call(r,t),r:r=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(r,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(r,"__esModule",{value:!0})}},t={};function n(r){return function(r){if(Array.isArray(r))return e(r)}(r)||function(r){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(r))return Array.from(r)}(r)||function(r,t){if(r){if("string"==typeof r)return e(r,t);var n=Object.prototype.toString.call(r).slice(8,-1);return"Object"===n&&r.constructor&&(n=r.constructor.name),"Map"===n||"Set"===n?Array.from(n):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?e(r,t):void 0}}(r)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function e(r,t){(null==t||t>r.length)&&(t=r.length);for(var n=0,e=new Array(t);n<t;n++)e[n]=r[n];return e}function o(){return[[1,0,0],[0,1,0],[0,0,1]]}function i(r){var t=n(new Array(r[0].length)),e=n(new Array(r.length));return t.map((function(t,n){return e.map((function(t,e){return r[e][n]}))}))}function a(r,t){return r.reduce((function(r,n,e){return r+n*t[e]}),0)}function u(r,t){var e=i(t),o=n(new Array(e.length));return r.reduce((function(r,t){return[].concat(n(r),[o.map((function(r,n){return a(t,e[n])}))])}),[])}function c(r){var t=function(r){return r[0][0]*r[1][1]-r[0][1]*r[1][0]}(r);return u([[r[1][1]/t,-r[0][1]/t,0],[-r[1][0]/t,r[0][0]/t,0],[0,0,1]],[[1,0,-r[0][2]],[0,1,-r[1][2]],[0,0,1]])}function l(r,t){return Math.pow(r,t)}function f(r){return Math.sin(r)}function s(r){return Math.cos(r)}function p(r){return l(r.reduce((function(r,t){return r+t*t}),0),.5)}r.r(t),r.d(t,{cos:()=>s,default:()=>rr,dot:()=>a,frameToFrameMatrix:()=>O,giveRatio:()=>Z,giveWorldMatrix:()=>_,identity:()=>o,identityFrame:()=>v,inv:()=>c,locFrameTrans:()=>j,locsFrameTrans:()=>A,multiply:()=>u,multiplyMatrixStack:()=>L,norm:()=>p,normalizeFrame:()=>$,normalizedFrame:()=>U,pow:()=>l,prepArray:()=>g,prepArrays:()=>x,prepLoc:()=>b,prepLocs:()=>w,prepVec:()=>M,prepVecs:()=>h,rotateFrame:()=>K,rotatedFrame:()=>J,scaleFrame:()=>Q,scaledFrame:()=>N,sin:()=>f,transformWithMatrix:()=>B,transformedByMatrix:()=>q,translateFrame:()=>H,translatedFrame:()=>G,transpose:()=>i,vecFrameTrans:()=>F,vecsFrameTrans:()=>S,withChild:()=>R,withRatio:()=>Y,withWorldMatrix:()=>V});const m={identity:o,transpose:i,dot:a,multiply:u,inv:c,pow:l,sin:f,cos:s,norm:p};function d(r){return function(r){if(Array.isArray(r))return y(r)}(r)||function(r){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(r))return Array.from(r)}(r)||function(r,t){if(r){if("string"==typeof r)return y(r,t);var n=Object.prototype.toString.call(r).slice(8,-1);return"Object"===n&&r.constructor&&(n=r.constructor.name),"Map"===n||"Set"===n?Array.from(n):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?y(r,t):void 0}}(r)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function y(r,t){(null==t||t>r.length)&&(t=r.length);for(var n=0,e=new Array(t);n<t;n++)e[n]=r[n];return e}var v={type:"frame",worldMatrix:m.identity()},b=function(r){return m.transpose([[].concat(d(r),[1])])},w=function(r){return m.transpose(r.map((function(r){return[].concat(d(r),[1])})))},M=function(r){return m.transpose([[].concat(d(r),[0])])},h=function(r){return m.transpose(r.map((function(r){return[].concat(d(r),[0])})))},g=function(r){return m.transpose(r)[0].slice(0,-1)},x=function(r){return m.transpose(r).map((function(r){return r.slice(0,-1)}))},O=function(r,t){return m.multiply(m.inv(t.worldMatrix),r.worldMatrix)},j=function(r,t,n){return g(m.multiply(O(t,n),b(r)))},A=function(r,t,n){return x(m.multiply(O(t,n),w(r)))},F=function(r,t,n){return g(m.multiply(O(t,n),M(r)))},S=function(r,t,n){return x(m.multiply(O(t,n),h(r)))};const T=require("lodash/cloneDeep");var P=r.n(T);const I=require("unist-util-visit");var W=r.n(I);function C(r){return function(r){if(Array.isArray(r))return D(r)}(r)||function(r){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(r))return Array.from(r)}(r)||function(r,t){if(r){if("string"==typeof r)return D(r,t);var n=Object.prototype.toString.call(r).slice(8,-1);return"Object"===n&&r.constructor&&(n=r.constructor.name),"Map"===n||"Set"===n?Array.from(n):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?D(r,t):void 0}}(r)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function D(r,t){(null==t||t>r.length)&&(t=r.length);for(var n=0,e=new Array(t);n<t;n++)e[n]=r[n];return e}function E(r,t){var n=Object.keys(r);if(Object.getOwnPropertySymbols){var e=Object.getOwnPropertySymbols(r);t&&(e=e.filter((function(t){return Object.getOwnPropertyDescriptor(r,t).enumerable}))),n.push.apply(n,e)}return n}function z(r,t,n){return t in r?Object.defineProperty(r,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):r[t]=n,r}function L(r){return r.length?1==r.length?r[0]:2==r.length?m.multiply(r[1],r[0]):m.multiply(r.slice(-1)[0],L(r.slice(0,-1))):m.identity()}var R=function(r,t){return function(r){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?E(Object(n),!0).forEach((function(t){z(r,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(r,Object.getOwnPropertyDescriptors(n)):E(Object(n)).forEach((function(t){Object.defineProperty(r,t,Object.getOwnPropertyDescriptor(n,t))}))}return r}({},r,{children:[t].concat(C(r.children))})};function V(r,t){var n=P()(r),e=m.inv(n.worldMatrix);return W()(n,(function(r,n,o){o&&r.worldMatrix&&(r.worldMatrix=L([r.worldMatrix,e,t]))})),n.worldMatrix=t,n}function _(r,t){var n=m.inv(r.worldMatrix);return W()(r,(function(r,e,o){o&&r.worldMatrix&&(r.worldMatrix=L([r.worldMatrix,n,t]))})),r.worldMatrix=t,r}function k(r){var t=r.worldMatrix,n=[[t[0][0],t[1][0]],[t[0][1],t[1][1]]].map((function(r){var t=m.norm(r);return r.map((function(r){return r/t}))}));return[[].concat(C(n[0]),[t[0][2]]),[].concat(C(n[1]),[t[1][2]]),[0,0,1]]}function U(r){return V(r,k(r))}function $(r){return _(r,k(r))}function q(r,t,n){return V(r,L(n?[r.worldMatrix,m.inv(n.worldMatrix),t,n.worldMatrix]:[t,r.worldMatrix]))}function B(r,t,n){return _(r,L(n?[r.worldMatrix,m.inv(n.worldMatrix),t,n.worldMatrix]:[t,r.worldMatrix]))}var G=function(r,t,n){return q(r,[[1,0,t[0]],[0,1,t[1]],[0,0,1]],n)},H=function(r,t,n){return B(r,[[1,0,t[0]],[0,1,t[1]],[0,0,1]],n)},J=function(r,t,n){return q(r,[[m.cos(t),-m.sin(t),0],[m.sin(t),m.cos(t),0],[0,0,1]],n)},K=function(r,t,n){return B(r,[[m.cos(t),-m.sin(t),0],[m.sin(t),m.cos(t),0],[0,0,1]],n)},N=function(r,t,n){return q(r,[[t[0],0,0],[0,t[1],0],[0,0,1]],n)},Q=function(r,t,n){return B(r,[[t[0],0,0],[0,t[1],0],[0,0,1]],n)},X=function(r,t){var n=m.transpose(r.worldMatrix).reduce((function(r,t,n){return 2==n?r:[].concat(C(r),[m.norm(t.slice(0,2))])}),[]);return m.pow(t*n[1]/n[0],.5)},Y=function(r,t){var n=X(r,t);return N(r,[n,1/n])},Z=function(r,t){var n=X(r,t);return Q(r,[n,1/n])};const rr={identityFrame:v,prepLoc:b,prepLocs:w,prepVec:M,prepVecs:h,prepArray:g,prepArrays:x,frameToFrameMatrix:O,locFrameTrans:j,locsFrameTrans:A,vecFrameTrans:F,vecsFrameTrans:S,multiplyMatrixStack:L,withChild:R,withWorldMatrix:V,giveWorldMatrix:_,normalizedFrame:U,normalizeFrame:$,transformedByMatrix:q,transformWithMatrix:B,translatedFrame:G,translateFrame:H,rotatedFrame:J,rotateFrame:K,scaledFrame:N,scaleFrame:Q,withRatio:Y,giveRatio:Z,identity:o,transpose:i,dot:a,multiply:u,inv:c,pow:l,sin:f,cos:s,norm:p};module.exports=t})();