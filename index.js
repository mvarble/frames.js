module.exports=function(r){var t={};function n(e){if(t[e])return t[e].exports;var o=t[e]={i:e,l:!1,exports:{}};return r[e].call(o.exports,o,o.exports,n),o.l=!0,o.exports}return n.m=r,n.c=t,n.d=function(r,t,e){n.o(r,t)||Object.defineProperty(r,t,{enumerable:!0,get:e})},n.r=function(r){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(r,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(r,"__esModule",{value:!0})},n.t=function(r,t){if(1&t&&(r=n(r)),8&t)return r;if(4&t&&"object"==typeof r&&r&&r.__esModule)return r;var e=Object.create(null);if(n.r(e),Object.defineProperty(e,"default",{enumerable:!0,value:r}),2&t&&"string"!=typeof r)for(var o in r)n.d(e,o,function(t){return r[t]}.bind(null,o));return e},n.n=function(r){var t=r&&r.__esModule?function(){return r.default}:function(){return r};return n.d(t,"a",t),t},n.o=function(r,t){return Object.prototype.hasOwnProperty.call(r,t)},n.p="",n(n.s=3)}([function(r,t){r.exports=require("mathjs")},function(r,t){r.exports=require("lodash/cloneDeep")},function(r,t){r.exports=require("unist-util-visit")},function(r,t,n){"use strict";n.r(t),n.d(t,"prepLoc",(function(){return c})),n.d(t,"prepLocs",(function(){return f})),n.d(t,"prepVec",(function(){return l})),n.d(t,"prepVecs",(function(){return s})),n.d(t,"prepArray",(function(){return p})),n.d(t,"prepArrays",(function(){return d})),n.d(t,"frameToFrameMatrix",(function(){return m})),n.d(t,"locFrameTrans",(function(){return y})),n.d(t,"locsFrameTrans",(function(){return b})),n.d(t,"vecFrameTrans",(function(){return v})),n.d(t,"vecsFrameTrans",(function(){return x})),n.d(t,"multiplyMatrixStack",(function(){return A})),n.d(t,"withChild",(function(){return P})),n.d(t,"withWorldMatrix",(function(){return T})),n.d(t,"normalizedFrame",(function(){return I})),n.d(t,"transformedByMatrix",(function(){return _})),n.d(t,"translatedFrame",(function(){return D})),n.d(t,"rotatedFrame",(function(){return C})),n.d(t,"scaledFrame",(function(){return E})),n.d(t,"withRatio",(function(){return L})),n.d(t,"identityFrame",(function(){return a}));var e=n(0),o={identity:e.identity,matrix:e.matrix,transpose:e.transpose,inv:e.inv,multiply:e.multiply,pow:e.pow,cos:e.cos,sin:e.sin,norm:e.norm};function i(r){return function(r){if(Array.isArray(r))return u(r)}(r)||function(r){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(r))return Array.from(r)}(r)||function(r,t){if(!r)return;if("string"==typeof r)return u(r,t);var n=Object.prototype.toString.call(r).slice(8,-1);"Object"===n&&r.constructor&&(n=r.constructor.name);if("Map"===n||"Set"===n)return Array.from(n);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return u(r,t)}(r)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function u(r,t){(null==t||t>r.length)&&(t=r.length);for(var n=0,e=new Array(t);n<t;n++)e[n]=r[n];return e}var a={type:"frame",worldMatrix:o.identity(3)},c=function(r){return o.transpose(o.matrix([[].concat(i(r),[1])]))},f=function(r){return o.transpose(o.matrix(r.map((function(r){return[].concat(i(r),[1])}))))},l=function(r){return o.transpose(o.matrix([[].concat(i(r),[0])]))},s=function(r){return o.transpose(o.matrix(r.map((function(r){return[].concat(i(r),[0])}))))},p=function(r){return o.transpose(r).valueOf()[0].slice(0,-1)},d=function(r){return o.transpose(r).valueOf().map((function(r){return r.slice(0,-1)}))},m=function(r,t){return o.multiply(o.inv(t.worldMatrix),r.worldMatrix)},y=function(r,t,n){return p(o.multiply(m(t,n),c(r)))},b=function(r,t,n){return d(o.multiply(m(t,n),f(r)))},v=function(r,t,n){return p(o.multiply(m(t,n),l(r)))},x=function(r,t,n){return d(o.multiply(m(t,n),s(r)))},w=n(1),O=n.n(w),h=n(2),j=n.n(h);function M(r){return function(r){if(Array.isArray(r))return g(r)}(r)||function(r){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(r))return Array.from(r)}(r)||function(r,t){if(!r)return;if("string"==typeof r)return g(r,t);var n=Object.prototype.toString.call(r).slice(8,-1);"Object"===n&&r.constructor&&(n=r.constructor.name);if("Map"===n||"Set"===n)return Array.from(n);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return g(r,t)}(r)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function g(r,t){(null==t||t>r.length)&&(t=r.length);for(var n=0,e=new Array(t);n<t;n++)e[n]=r[n];return e}function F(r,t){var n=Object.keys(r);if(Object.getOwnPropertySymbols){var e=Object.getOwnPropertySymbols(r);t&&(e=e.filter((function(t){return Object.getOwnPropertyDescriptor(r,t).enumerable}))),n.push.apply(n,e)}return n}function S(r,t,n){return t in r?Object.defineProperty(r,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):r[t]=n,r}function A(r){return r.length?1==r.length?r[0]:2==r.length?o.multiply(r[1],r[0]):o.multiply(r.slice(-1)[0],A(r.slice(0,-1))):o.identity(3)}var P=function(r,t){return function(r){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?F(Object(n),!0).forEach((function(t){S(r,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(r,Object.getOwnPropertyDescriptors(n)):F(Object(n)).forEach((function(t){Object.defineProperty(r,t,Object.getOwnPropertyDescriptor(n,t))}))}return r}({},r,{children:[t].concat(M(r.children))})};function T(r,t){var n=O()(r),e=n.worldMatrix;return j()(n,(function(r,n,i){i&&r.worldMatrix&&(i.children[n].worldMatrix=A([r.worldMatrix,o.inv(e),t]))})),n.worldMatrix=t,n}function I(r){var t=r.worldMatrix.valueOf(),n=[[t[0][0],t[1][0]],[t[0][1],t[1][1]]].map((function(r){return o.multiply(r,1/o.norm(r))}));return T(r,o.matrix([[].concat(M(n[0]),[t[0][2]]),[].concat(M(n[1]),[t[1][2]]),[0,0,1]]))}function _(r,t,n){return T(r,A(n?[r.worldMatrix,o.inv(n.worldMatrix),t,n.worldMatrix]:[t,r.worldMatrix]))}var D=function(r,t,n){return _(r,o.matrix([[1,0,t[0]],[0,1,t[1]],[0,0,1]]),n)},C=function(r,t,n){return _(r,o.matrix([[o.cos(t),-o.sin(t),0],[o.sin(t),o.cos(t),0],[0,0,1]]),n)},E=function(r,t,n){return _(r,o.matrix([[t[0],0,0],[0,t[1],0],[0,0,1]]),n)},L=function(r,t){var n=o.transpose(r.worldMatrix).valueOf().reduce((function(r,t,n){return 2==n?r:[].concat(M(r),[o.norm(t.slice(0,2))])}),[]),e=o.pow(t*n[1]/n[0],.5);return E(r,[e,1/e])};t.default={prepLoc:c,prepLocs:f,prepVec:l,prepVecs:s,prepArray:p,prepArrays:d,frameToFrameMatrix:m,locFrameTrans:y,locsFrameTrans:b,vecFrameTrans:v,vecsFrameTrans:x,multiplyMatrixStack:A,withChild:P,withWorldMatrix:T,normalizedFrame:I,transformedByMatrix:_,translatedFrame:D,rotatedFrame:C,scaledFrame:E,withRatio:L,identityFrame:a}}]);